* F283I-OC
*
* I/O PROCESSING AND TABLES
*
 ORG $D370


Monitr LDA #$0A
 BSR Toutch
 LDA #$0D
 BSR Toutch
 SWI
 JMP WARMS

Tinit PSHS A
 LDA #$11
 STA [ACIAAD]
 PULS A,PC

Tinche TST INTAP VECTOR FOR INPUT TAP ROUTINE
 BEQ LD397
 JSR [INTAP] VECTOR FOR INPUT TAP ROUTINE

Toutch JMP [sOUTCH]

Tcheck JMP [INCHEK]

LD397 JMP [INCHE]

Tinch JMP [sINCH]

Ihndlr LEAU <LD3D7,PCR

LD3A2 LDU 4,U
 BEQ LD3B2
 LDA [0,U]
 BITA 6,U
 BEQ LD3A2
 LDY 0,U
 JMP [2,U]

LD3B2 RTI

Setirq PSHS X,Y,U
 BSR LD3CB
 BEQ LD3BD
 STU 4,X
 STX 4,Y

LD3BD PULS X,Y,U,PC

Clrirq PSHS X,Y,U
 BSR LD3CB
 BNE LD3C9
 LDX 4,X
 STX 4,U

LD3C9 PULS X,Y,U,PC

LD3CB LEAU <LD3D7,PCR

LD3CE LEAY 0,U
 CMPX 4,U
 BEQ LD3DA
 LDU 4,U
 BNE LD3CE

LD3D7 EQU *-1
 ANDCC #$FB

LD3DA RTS

 FCB $00,$00,$01

INTAP FDB 0 VECTOR FOR INPUT TAP ROUTINE

DUMMY RTS

SETIRQ FDB Setirq SET IRQ PROCESS VECTOR

CLRIRQ FDB Clrirq CLEAR IRQ PROCESS VECTOR

TINCH FDB Tinch LOW-LEVEL TERM INPUT WITHOUT ECHO

IHNDLR FDB Ihndlr

SWI3VA FDB SWI3V

IRQVA FDB IRQV

TMOFFA FDB DUMMY TIMER OFF ROUTINE ADDRESS

TMONA FDB DUMMY TIMER ON ROUTINE ADDRESS

TMINTA FDB DUMMY TIMER INITIALISE ROUTINE ADDRESS

MONITR FDB Monitr

TINIT FDB Tinit LOW-LEVEL TERM INITIALISE

TCHECK FDB Tcheck LOW-LEVEL TERM CHECK ADDRESS

TOUTCH FDB Toutch LOW-LEVEL TERM OUTPUT ADDRESS

TINCHE FDB Tinche LOW-LEVEL TERM INPUT WITH ECHO

LD3FD JMP LC400

