
.CONSTANTS

RED      EQU   1             TELETEXT COLOURS AND CONTROL CHARACTER CODES
GREEN    EQU   2
YELLOW   EQU   3
BLUE     EQU   4
MAGENTA  EQU   5
CYAN     EQU   6
WHITE    EQU   7
FLASH    EQU   8
STEADY   EQU   9
DOUBLEHT EQU   $0D
CONCEAL  EQU   $18           CONCEAL CHARACTER
BLACKBAK EQU   $1C           SET BACKGROUND BLACK
NEWBAK   EQU   $1D           SET NEW BACKGROUND
.NEW KEYBOARD EQUATES
CINSKEY  EQU   1
CDELKEY  EQU   2
LINSERT  EQU   3
LDELETE  EQU   4
CLFKEY   EQU   8
CRTKEY   EQU   9
LINSKEY  EQU   $11
LDELKEY  EQU   $12
NEXTKEY  EQU   $13
REPTKEY  EQU   $14
BACKKEY  EQU   $15
HELPKEY  EQU   $16
CALCKEY  EQU   $17
EXITKEY  EQU   $1A
CDNKEY   EQU   $18
CUPKEY   EQU   $19
SPSEKEY  EQU   $1B
PSEKEY   EQU   $1C
PNDKEY   EQU   $23

. ERROR EQUATES
INVSWI   EQU   31

.EDITOR EQUATES

SCRUP    EQU   $05
SCRDN    EQU   6
CDOWN    EQU   $A
CUP      EQU   $B
RVD      EQU   $10
NML      EQU   $1B
LCLR     EQU   $1E           Clear to end of line
LINIT    EQU   $1F           Editor initialise character

NUL      EQU   $00           CHARACTER STRING TERMINATOR
BEL      EQU   $07           BELL
BS       EQU   $08           BACKSPACE CURSOR (NON DESTRUCTIVE)
HT       EQU   $09           CURSOR FORWARDS (NON DESTRUCTIVE)
LF       EQU   $0A           LINEFEED - CURSOR DOWN
VT       EQU   $0B           CURSOR UP ONE LINE
FF       EQU   $0C           CLEAR CURRENT SCREEN
CR       EQU   $0D           CARRIAGE RETURN
SO       EQU   $0E           SHIFT TO ASCII MODE
SI       EQU   $0F           SHIFT TO TELETEXT MODE
SPACE    EQU   $20
JUMP     EQU   $7E           OP CODE FOR JUMP TO TEST FOR PRESENCE OF BASIC

CLOCKRUN EQU   $40           50 Hz CLOCK TIMER INITIALISATION
DIV1MHZ  EQU   $82           TIMER 2 COUNT INTERNAL 1MHz TO O/P PIN

DFLTLNTH EQU   40            START BOTH SCRENS IN 40 CHAR MODE
DFLTCLKP EQU   SCREEN1+952   CLOCK ON LAST 8 CHARS OF TTXT1 SCREEN
DFLTBRK  EQU   SYSTEM        DEFAULT VALUE FOR BREAK KEY VECTOR
NAMELGTH EQU   4             4 BYTES EACH FOR NAME & PASSWORD
BLKCHR   EQU   $00           SCREEN BLANKING CHARACTER IS NULL CHR
BLKWRD   EQU   BLKCHR*256+BLKCHR TWO BLANKING CHARS
KEYREPT  EQU   1300          1/22th SEC DELAY FOR AUTO KEY REPEAT
KEYDELAY EQU   14285         1/2 SECOND   "    "   "    "    "

STRBUF   EQU   $1000
ENDBUF   EQU   $9000

.SYSTEM CONSTANTS

BASCROM1 EQU   $A000         BASIC ROM #1
BASICWARM EQU  $A003
BOOTAREA EQU   $C000
COLDS    EQU   $CD00         COLD START OF DISK OPERATING SYSTEM
SYSTEM   EQU   $E000         START OF SYSTEM PROTECTED AREA

.PIA ASSIGNMENT

VIDEOA   EQU   $E000         VIDEO PIA PORT A DATA
VIDEOAC  EQU   VIDEOA+1      CONTROL
VIDEOB   EQU   VIDEOA+2      VIDEO PIA PORT B DATA
VIDEOBC  EQU   VIDEOA+3      CONTROL

ACIAS    EQU   $E004         ACIA STATUS REGISTER - NOT NEEDED FOR TELETEXT !
ACIAD    EQU   ACIAS+1       ACIA DATA REGISTER
BAUDRATE EQU   $E006         ACIA BAUD RATE

SOUND    EQU   $E008         SOUND SYNTHESISER PIA DATA
SOUNDC   EQU   SOUND+1       CONTROL
LSOFF    EQU   $34           LOUD SPEAKER OUTPUT LOW
TOUCH    EQU   $E00A         TOUCH SCREEN PIA DATA
TOUCHC   EQU   TOUCH+1       CONTROL

SPARE    EQU   $E00C         SPARE PIA DATA PORT
SPAREC   EQU   SPARE+1       CONTROL
KEYBD    EQU   $E00E         ASCII KEYBOARD PIA DATA
KEYBDC   EQU   KEYBD+1       CONTROL

.
BLOCKID  EQU   LBUF
BLOCKNO  EQU   LBUF+2
BLOCKADR EQU   LBUF+3
BLOCKLGH EQU   LBUF+5
.PROGRAMMABLE TIMER

TIMER    EQU   $E020         PROGRAMMABLE TIMER CHIP
TIMCR31  EQU   TIMER         CONTROL REGISTERS 3 AND 1
TIMCR2   EQU   TIMER+1       CR 2
TIMSTAT  EQU   TIMER+1       STATUS REGISTER
TIMER1   EQU   TIMER+2       TIMER #1 MS BYTE
TIMER2   EQU   TIMER+4       TIMER #2 MS BYTE
TIMER3   EQU   TIMER+6       TIMER #3 MS BYTE

.ADVANCED DATA LINK CONTROLLER  (6854) FOR COMMS NETWORK

ADLC     EQU   $E030         ADVANCED DATA LINK CONTROLLER

.OTHER IMPORTANT ADDRESSES

PROTECT  EQU   $E040         PROTECT SYSTEM AREA BY ACCESSING HERE
DATRAM   EQU   $E050         BASE ADDR OF DYNAMIC ADDR TRANSLATOR RAM (16 BYTES )
MAPONE   EQU   $E060         SELECT MAP ONE BY ACCESSING HERE
MAPTWO   EQU   $E070         SELECT MAP TWO BY ACCESSING HERE


SCREEN1  EQU   $E800         START OF TELETEXT 1 PHYSICAL SCREEN MEM
SCREEN2  EQU   $EC00         START OF TELETEXT 2 PHYSICAL SCREEN MEM


VARS1    EQU   SCREEN1+960   START OF VARIABLES IN SCREEN MEM 1
VARS2    EQU   SCREEN2+960   START OF VARIABLES IN SCREEN MEM 2
DIRECT   EQU   VARS1>>8      DIRECT PAGE
STACK    EQU   $DFBC         INITIAL VALUE FOR STACK POINTER
CHROUT   EQU   VDU

LOADREQ  EQU   $10
LOAD     EQU   $10
STRTADR  EQU   $C100
LBUF     EQU   $C400
LBUFE    EQU   LBUF+256


POLYNUMBER EQU $FFF0
ROMVECS  EQU   $FFF2         POSITION OF SYSTEM INTERRUPT VECTORS


.USER VECTORS
         ORG   $DFCC
VECTBEG


EXITVECT RMB   2             EXIT VECTOR
TIMVECT  RMB   2             TIMER VECTOR
KEYVECT  RMB   2             USER DEFINABLE KEYS
GKINTVEC RMB   2             GENERAL KEYBOARD VECTOR
HELPVECT RMB   2             HELP KEY VECTOR
CALCVECT RMB   2             CALCULATOR VECTOR
SECVECT  RMB   2             SECONDS VECTOR
USERVECT RMB   2             USER PORT VECTOR
BKPTVECT RMB   2

VECTEND


.SOFT KEY TABLE


SOFTKEYTBL RMB 10
KEYBITMAP  RMB  4
KBMEND
.

R        RMB   1             CRC MS BYTE
S        RMB   1             CRC LS BYTE
PATDEL   RMB   1             PATTERN DELAY
TOTCNT   RMB   1             WINDOW WIDTH
USERNAME RMB   NAMELGTH      USER NAME IN RAM ACCESSIBLE BY USER
NAMEPASS RMB   2
.TEMPORARY REGS USED BY CASSETTE INTERFACE

.Q        RMB   1             STORE BYTE ON LOADBYTE (CASSETTE)
.ACCA     RMB   1             TEMPORARY REG A
.ACCB     RMB   1             TEMPORARY REG B
.CHIGH
.PORTOUT  RMB   1             TEMPORARY BYTE TO STORE PIA STATUS WITH BIT 7 STRIP OFF
.


